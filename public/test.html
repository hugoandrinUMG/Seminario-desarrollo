<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API Test</title>
</head>
<body>
<h1>Test API Endpoints</h1>
<h2>Create User</h2>
<form id="createUserForm">
<input type="text" id="name" placeholder="Name" required />
<input type="email" id="email" placeholder="Email" required />
<input type="password" id="contrasena" placeholder="Password" required />
<input type="text" id="rol" placeholder="Role" required />
<button type="submit">Create User</button>
</form>
<h2>Get All Users</h2>
<button id="getAllUsers">Get Users</button>
<script>
        const apiBaseUrl = 'http://localhost:3000/api';
        // Handle Create User form submission
        document.getElementById('createUserForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            const nombre = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const contrasena = document.getElementById('contrasena').value;
            const rol = document.getElementById('rol').value;
            const response = await fetch(`${apiBaseUrl}/usuarios`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ nombre, email, contrasena, rol })
            });
            const data = await response.json();
            console.log(data);
        });
        // Handle Get All Users button click
document.getElementById('getAllUsers').addEventListener('click', async () => {
    const response = await fetch(`${apiBaseUrl}/usuarios`);
    // Verificar si la respuesta fue exitosa (status 200)
    if (response.ok) {
        const data = await response.json();
        // Mostrar los usuarios en consola (opcional)
        console.log(data);
 
        // Mostrar los usuarios en el HTML
        const usersList = document.createElement('ul');
        data.forEach(usuario => {
            const listItem = document.createElement('li');
            listItem.textContent = `Nombre: ${usuario.nombre}, Email: ${usuario.email}, Rol: ${usuario.rol}`;
            usersList.appendChild(listItem);
        });
        document.body.appendChild(usersList); // Agregar la lista al body del documento
    } else {
        console.error('Error al obtener usuarios:', response.statusText);
    }
});
</script>
</body>
</html>